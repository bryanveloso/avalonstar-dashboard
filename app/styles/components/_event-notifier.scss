$donation: #2ecc71;
$host: #9b59b6;
$subscription: #3498db;
$resubscription: #3498db;
$substreak: #e67e22;


.event-notifier {
  color: white;

  // Defaults.
  position: absolute;
  max-width: 960px;
  height: 90px;
  padding: 27px 0;
}

.notifier__container {
  position: relative;
  white-space: nowrap;
}

.square__container {
  display: inline-block;
  vertical-align: top;
}

// The little square nub sub-icon thing.
$square-size: 36px;
.square__container,
.animate__square {
  display: inline-block;
  perspective: 1000;
  margin-right: 1px;
  width: $square-size; height: $square-size;
  z-index: 100; }

.square__flipper {
  position: relative;
  transform-style: preserve-3d;
  transform-origin: 50% 50%;
}

.square--front, .square--rear {
  overflow: hidden;
  position: absolute; top: 0; left: 0;
  width: $square-size; height: $square-size;

  backface-visibility: hidden;
  line-height: $square-size;
  text-align: center;

  .ss-icon { font-size: 18px; }
}
.square--front {
  transform: rotateY(0deg);
  background-color: $subscription; }
.square--rear { transform: rotateY(180deg); }

// The container for the event message.
.event__container {
}

.event__type, .event__message {
  display: inline-block;
  padding: 0 12px;

  font-size: 18px;
  line-height: $square-size;
  white-space: nowrap;
}
.event__type {
  font-style: italic;
  font-weight: 700;
  text-transform: capitalize;
}
.event__message {
  background-color: #fff;
  color: #333;
  font-style: italic;
}
.event__username {
  font-weight: 600;
}

// Animation-related styling, default states, etc.
.event__type,
.event__message,
.square__container {
  visibility: hidden;
}

.animate__event {
  position: absolute; right: calc(100% - 36px);
  width: 0; height: $square-size;
  z-index: 100;
}
.animate__square {
  position: absolute;
  visibility: hidden;
  z-index: 200;
}

// Animation delcarations.
.notifier__container.active {
  .animate__event {
    animation-timing-function: cubic-bezier(0.645, 0.045, 0.355, 1);
    animation-fill-mode: forward;

    animation-name: animate-event-in, animate-event-across, animate-event-out;
    animation-delay: 700ms, 1400ms, 2100ms;
    animation-duration: 700ms, 700ms, 700ms;
  }
  .animate__square {
    animation-timing-function: cubic-bezier(0.645, 0.045, 0.355, 1);
    animation-fill-mode: both;

    animation-name: animate-square-reveal, animate-square-in, animate-square-across, animate-square-remove;
    animation-delay: 0ms, 0ms, 1400ms, 7100ms;
    animation-duration: 250ms, 1000ms, 700ms, 500ms;
  }
  .square__flipper {
    animation-timing-function: cubic-bezier(0.55, 0, 0.1, 1.0);
    animation-fill-mode: both;

    animation-name: flip-square;
    animation-delay: 1000ms;
    animation-duration: 500ms;
  }

  //.
  .event__type {
    animation-fill-mode: both;

    animation-name: event-type-reveal, event-type-remove;
    animation-delay: 2100ms, 7000ms;
    animation-duration: 100ms, 500ms;
  }
  .event__message {
    animation-fill-mode: both;

    animation-name: event-message-reveal, event-message-remove;
    animation-delay: 1800ms, 7050ms;
    animation-duration: 100ms, 500ms;
  }
}

// Keyframe declarations.
// (All bounce.js related declarations live in event-notifier.js.)
@keyframes animate-event-in {
    0% { right: calc(100% - 38px); width: 0; }

    1% { width: 2px; }
  100% { right: 0; width: 2px; }
}
@keyframes animate-event-across {
    0% { right: 0; }
  100% { right: 0; width: 100%; }
}
@keyframes animate-event-out {
    0% { left: 0; width: 100%; }
  100% { left: 0; width: 0px; }
}

@keyframes animate-square-reveal {
    0% { visibility: hidden; }
  100% { visibility: visible; }
}
@keyframes animate-square-across {
    0% { right: calc(100% - 36px); }
  100% { right: 0; }
}
@keyframes animate-square-remove {
    0% { opacity: 0.99; }
  100% { opacity: 0.0; }
}

@keyframes event-type-reveal {
    0% { visibility: hidden; }
  100% { visibility: visible; }
}
@keyframes event-type-remove {
    0% { opacity: 0.99; }
  100% { opacity: 0.0; }
}
@keyframes event-message-reveal {
    0% { visibility: hidden; }
  100% { visibility: visible; }
}
@keyframes event-message-remove {
    0% { opacity: 0.99; }
  100% { opacity: 0.0; }
}

@keyframes flip-square {
    0% { transform: scale(1.0) rotateY(0deg); }
   50% { transform: scale(1.1) rotateY(90deg); }
  100% { transform: scale(1.0) rotateY(180deg); }
}

// Event-based state changes.
.notifier__container {
  &[data-type="donation"] {
    .event__type, .square--rear { background-color: $donation; }
    .animate__event { background-color: darken($donation, 20%); } }
  &[data-type="host"] {
    .event__type, .square--rear { background-color: $host }
    .animate__event { background-color: darken($host, 20%); } }
  &[data-type="subscription"], [data-type="resubscription"] {
    .event__type, .square--rear { background-color: $subscription }
    .animate__event { background-color: darken($subscription, 20%); } }
  &[data-type="substreak"] {
    .event__type, .square--rear { background-color: $substreak }
    .animate__event { background-color: darken($substreak, 20%); } }
}
